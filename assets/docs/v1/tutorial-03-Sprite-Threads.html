<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> Sprite Threads</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
            
             
                <a href="index.html">
                    <h1 class="navbar-item">RPGWizard Documentation</h1>
                </a>
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    API Documentation
                </a>
                
                <div class="dropdown is-hoverable is-right">
                    <a class="dropdown-trigger link">
                        Tutorials
                        <i class="fas fa-chevron-down fa-xs"></i>
                    </a>
                    <div class="dropdown-menu">
                        <div class="dropdown-content">
                        
                            <a class="dropdown-item" href="tutorial-01-Getting-Started.html">
                                Getting Started
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-02-Your-First-Game.html">
                                Your First Game
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-03-Programming-Guide.html">
                                Programming Guide
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-04-Default-Systems.html">
                                Default Systems
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-05-Example-Games.html">
                                Example Games
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-06-Advanced-Topics.html">
                                Advanced Topics
                            </a>
                        
                        </div>
                    </div>
                </div>
                
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar tutorials"
            id="sidebarNav"
        >
            
                <div class="search-wrapper">
                    <input id="search" type="text" placeholder="Search docs..." class="input">
                </div>
            
            <nav>
                
                    <div class="category"><h3>Tutorials</h3><ul><li><a href="tutorial-01-Getting-Started.html">Getting Started</a><ul><li><a href="tutorial-01-Trying-Out-the-Demo.html">Trying Out the Demo</a></li><li><a href="tutorial-01-Accessing-the-Console.html">Accessing the Console</a></li></ul></li><li><a href="tutorial-02-Your-First-Game.html">Your First Game</a><ul><li><a href="tutorial-02-Starting-a-New-Project.html">Starting a New Project</a></li><li><a href="tutorial-02-Creating-an-Animation.html">Creating an Animation</a></li><li><a href="tutorial-02-Creating-a-Character.html">Creating a Character</a></li><li><a href="tutorial-02-Creating-a-Tileset.html">Creating a Tileset</a></li><li><a href="tutorial-02-Creating-a-Board.html">Creating a Board</a></li><li><a href="tutorial-02-Creating-a-Board-Layer.html">Creating a Board Layer</a></li><li><a href="tutorial-02-Adding-a-Solid-Board-Vector.html">Adding a Solid Board Vector</a></li><li><a href="tutorial-02-Moving-between-Boards.html">Moving between Boards</a></li><li><a href="tutorial-02-Creating-an-NPC.html">Creating an NPC</a></li><li><a href="tutorial-02-Creating-a-Board-Sprite.html">Creating a Board Sprite</a></li><li><a href="tutorial-02-Creating-an-Inventory-Item.html">Creating an Inventory Item</a></li></ul></li><li><a href="tutorial-03-Programming-Guide.html">Programming Guide</a><ul><li><a href="tutorial-03-Hello-World.html">Hello world!</a></li><li><a href="tutorial-03-Ending-a-Program.html">Ending a Program</a></li><li><a href="tutorial-03-Introduction-to-JavaScript.html">Introduction to JavaScript</a></li><li><a href="tutorial-03-Asset-Management.html">Asset Management</a></li><li><a href="tutorial-03-Global-Variables.html">Global Variables</a></li><li><a href="tutorial-03-Working-with-Graphics.html">Working with Graphics</a></li><li><a href="tutorial-03-Working-with-Canvases.html">Working with Canvases</a></li><li><a href="tutorial-03-User-Input.html">User Input</a></li><li><a href="tutorial-03-File-Handling.html">File Handling</a></li><li><a href="tutorial-03-Sprite-Threads.html">Sprite Threads</a></li><li><a href="tutorial-03-Run-Time-Programs.html">Run Time Programs</a></li></ul></li><li><a href="tutorial-04-Default-Systems.html">Default Systems</a><ul><li><a href="tutorial-04-Setting-up-the-Default-Systems.html">Setup Process</a></li><li><a href="tutorial-04-Title-Screen.html">Title Screen</a></li><li><a href="tutorial-04-Dialog-Window.html">Dialog Window</a></li><li><a href="tutorial-04-Battle-System.html">Battle System</a></li><li><a href="tutorial-04-Weather-Effects.html">Weather Effects</a></li></ul></li><li><a href="tutorial-05-Example-Games.html">Example Games</a><ul><li><a href="tutorial-05-The-Vent.html">The Vent</a></li></ul></li><li><a href="tutorial-06-Advanced-Topics.html">Advanced Topics</a><ul><li><a href="tutorial-06-Canvas-2D-Context.html">Canvas 2D Context</a></li><li><a href="tutorial-06-Writing-Modules.html">Writing Modules</a></li></ul></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p>Tutorial</p>
                    <h1>Sprite Threads</h1>
                </header>
                <section>

<article>
    <h2>Summary</h2>
<p>A game with static sprites is no fun at all! You might be wondering how you can
bring life to everyone in your game world, like making them move around,
or have them chase the player? Well look no further than the Sprite Thread!</p>
<p><img src="images/programming_guide/07_sprite_threads/images/1.gif" alt=""></p>
<br/>
<h2>When and when not to use them</h2>
<h3>Use them for</h3>
<ul>
<li>Simple idling or wandering for NPCs and Enemies.</li>
<li>Moving objects such as projectiles, e.g. arrows.</li>
<li>Enemy AI, chasing the player can be achieved with sprite threads.</li>
</ul>
<h3>Don't use them for</h3>
<ul>
<li>Anything that needs to last longer than the life of a sprite, e.g. UI programs.</li>
</ul>
<h2>Key things about Threads</h2>
<blockquote>
<p>NOTE: Threads in RPGWizard aren't &quot;true threads&quot; since the engine is largely single-threaded, instead they give the illusion of threading, as they are run frequently enough.</p>
</blockquote>
<ul>
<li><strong>Don't use rpgcode.endProgram in programs meant for Sprite Threads.</strong>
<ul>
<li>Threads are constantly being executed start to finish by the engine.</li>
<li>Instead use control variables to ensure executions don't overlap.</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><strong>Each sprite on a board has their own copy of the thread code.</strong>
<ul>
<li>Variables won't be shared amongst the sprites, unless you use Globals.</li>
<li>When the Sprite is destroyed so too will be the running thread.</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><strong>Slow running threads will slow the engine down!</strong>
<ul>
<li>Stick to simple calculations to avoid game slowdowns.</li>
<li>Or put things on delayed callbacks so they don't execute often.</li>
</ul>
</li>
</ul>
<br/>
<ul>
<li><strong>If you want to prevent a sprite thread from executing use return.</strong>
<ul>
<li>Use the JavaScript <strong>return;</strong> statement at the highest level of the thread.</li>
<li>When nested in functions, use a chain of return statements.</li>
</ul>
</li>
</ul>
<br/>
<hr>
<h2>Example Usage</h2>
<h3>Idling Behaviour</h3>
<p>We are going to look at a simple example of how you can use <strong>Sprite Threading</strong> to
animate sprites on a board by creating a sprite that infinitely wanders.</p>
<p>The sprite will behave in the following ways:</p>
<ul>
<li>Infinitely wander around in different directions.</li>
<li>Move a set distance of pixels in each direction.</li>
<li>Complete each directional walk in a fixed time.</li>
</ul>
<p><img src="images/programming_guide/07_sprite_threads/images/1.gif" alt=""></p>
<br/>
<h4>The Code</h4>
<pre class="prettyprint source lang-javascript"><code>// 1: Behavior for a passive sprite that wanders randomly around the board.
var wanderDistancePx = 80;   // px
var wanderTime = 2500;       // ms
var entity = this;

// 2: Control variable, this if-statement will only run one time, after which
// the sprite will be infinitely wandering
if (!entity.wandering) {
    entity.wandering = true; // We are now wandering forever.
    doWander();
}

// 3: A simple wandering function which calls itself infinitely
function doWander() {
   var id = entity.sprite.id;

   // 4: Pick a random direction and shift the sprites pixel location a little
   var choice = getRandomDirection();
   if (choice === &quot;EAST&quot;) {
      velocityX = wanderDistancePx;
      velocityY = 0;
      rpgcode.setSpriteStance(id, &quot;EAST&quot;);
   } else if (choice === &quot;WEST&quot;) {
      velocityX = -wanderDistancePx;
      velocityY = 0;
      rpgcode.setSpriteStance(id, &quot;WEST&quot;);
   } else if (choice === &quot;SOUTH&quot;) {
      velocityY = wanderDistancePx;
      velocityX = 0;
      rpgcode.setSpriteStance(id, &quot;SOUTH&quot;);
   } else {
      velocityY = -wanderDistancePx;
      velocityX = 0;
      rpgcode.setSpriteStance(id, &quot;NORTH&quot;);
   }

   // 5: Move around forever by calling doWander infinitely
   rpgcode.moveSpriteTo(id, entity.x + velocityX, entity.y + velocityY, wanderTime, doWander);
}

// 6: Simple function to get a random direction
function getRandomDirection() {
   const directions = [&quot;EAST&quot;, &quot;WEST&quot;, &quot;NORTH&quot;, &quot;SOUTH&quot;];
   return directions[Math.floor(Math.random() * directions.length)];
}
</code></pre>
<br/>
<h4>Attaching it to a Sprite</h4>
<p>To attach a program to a sprite as a thread, select the sprite on the board and the properties tab select the program that you want to use:</p>
<p><img src="images/programming_guide/07_sprite_threads/images/2.png" alt=""></p>
<br/>
<p>After that all you need to do is enter the board with the sprite during gameplay and watch it endlessly run around!</p>
<h2>More Advanced Examples</h2>
<p>You can find a number of examples of how to use Sprite Threads for Enemy and NPC
AI scattered across the demo games, here is a short list of the most interesting
ones:</p>
<ul>
<li><a href="https://github.com/rpgwiz/tutorials/blob/master/TheVent/Programs/custom/enemy.js" target="_blank">Chasing Enemy from The Vent game</a></li>
<li><a href="https://github.com/rpgwiz/tutorials/blob/master/TheVent/Programs/Idle.js" target="_blank">Idling Dog from The Vent Game</a></li>
</ul>
</article>

</section>

            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by 
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>

<script src="scripts/search.js"> </script>

</body>
</html>